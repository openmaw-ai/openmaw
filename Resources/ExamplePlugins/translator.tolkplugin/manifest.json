{
  "id": "com.opentolk.translator",
  "name": "Translator",
  "version": "1.0.0",
  "description": "Translate voice input to a target language using OpenAI",
  "author": "OpenTolk",

  "triggers": [
    { "type": "keyword", "keywords": ["translate"], "position": "start", "stripTrigger": true }
  ],

  "execution": {
    "type": "http",
    "url": "https://api.openai.com/v1/chat/completions",
    "method": "POST",
    "headers": {
      "Authorization": "Bearer {{settings.api_key}}",
      "Content-Type": "application/json"
    },
    "body": {
      "model": "gpt-4o-mini",
      "messages": [
        {"role": "system", "content": "You are a translator. Translate the following text to {{settings.target_language}}. Output only the translation, nothing else."},
        {"role": "user", "content": "{{input}}"}
      ]
    },
    "responseJSONPath": "choices[0].message.content",
    "timeout": 15
  },

  "output": { "mode": "paste" },

  "settings": [
    { "key": "api_key", "label": "OpenAI API Key", "type": "secret", "required": true, "placeholder": "sk-..." },
    { "key": "target_language", "label": "Target Language", "type": "string", "default": "Spanish", "placeholder": "e.g., Spanish, French, German" }
  ]
}
